<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clarity Plan AI</title>
<style>
body { font-family: Arial, sans-serif; margin: 40px; background-color: #f7f7f7; }
h2 { color: #333; }
textarea { width: 100%; height: 120px; padding: 10px; margin-top: 5px; font-size: 16px; }
button { padding: 10px 20px; margin-top: 10px; margin-right: 10px; font-size: 16px; cursor: pointer; }
#response { margin-top: 20px; white-space: pre-wrap; background: #fff; padding: 10px; border-radius: 5px; min-height: 50px; }
#lang_select { margin-top: 10px; }
</style>
</head>
<body>

<h2>Transform problems into action plans / Transforma problemas en planes de acción</h2>

<label><strong>Describe your problem / Describe tu problema</strong></label><br>
<textarea id="problem_input" placeholder="Write your problem here / Escribe tu problema aquí"></textarea><br>

<button id="submit_btn">Submit / Enviar</button>
<button id="clear_btn">Clear / Limpiar</button>

<label for="lang_select">Language / Idioma:</label>
<select id="lang_select">
  <option value="en" selected>English</option>
  <option value="es">Español</option>
</select>

<div id="response">AI Response / Respuesta de la IA</div>

<script>
const submitBtn = document.getElementById('submit_btn');
const clearBtn = document.getElementById('clear_btn');
const problemInput = document.getElementById('problem_input');
const responseDiv = document.getElementById('response');
const langSelect = document.getElementById('lang_select');

// Función para enviar el problema a la IA
submitBtn.onclick = async () => {
  const problem = problemInput.value.trim();
  if (!problem) {
    alert('Please enter a problem / Por favor escribe un problema');
    return;
  }

  responseDiv.innerText = 'Processing / Procesando...';

  try {
    const res = await fetch('https://clarity-plan--clarity-plan-ai.replit.app/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ problem, language: langSelect.value })
    });

    const data = await res.json();
    responseDiv.innerText = data.answer || 'No response / Sin respuesta';
  } catch (err) {
    responseDiv.innerText = 'Error connecting to AI / Error al conectar con la IA';
    console.error(err);
  }
};

// Función para limpiar textarea y respuesta
clearBtn.onclick = () => {
  problemInput.value = '';
  responseDiv.innerText = '';
};
</script>

</body>
</html>
